<script type="text/javascript">{%raw%}(function(){if(typeof SECOMAPP==="undefined"){SECOMAPP={}};if(typeof Shopify==="undefined"){Shopify={}};SECOMAPP.fg_ver=1574452928;SECOMAPP.fg_scriptfile="freegifts_20191120.min.js";SECOMAPP.gifts_list_avai={"30195382485071":true,"30220321652815":true,"30713548832847":true,"30713548865615":true};})();{%endraw%}</script>
{% assign sca_all_gift_products_ids =",3968651755599,3085432750144,4173535969359," %}
<script data-cfasync="false" type="text/javascript">
  /* Smart Ecommerce App (SEA Inc)
  * http://www.secomapp.com
  * Do not reuse those source codes if don't have permission of us.
  * */
  {%if template =='product' and product.vendor =='freegifts' and product.metafields.secomapp['freegifts.product_url'] %}
    window.location.replace("{{product.metafields.secomapp['freegifts.product_url']}}");
  {%endif%}
  {%raw%}
  (function(){if(!Array.isArray){Array.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"}}"function"!==typeof Object.create&&(Object.create=function(e){function t(){}t.prototype=e;return new t});if(!Object.keys){Object.keys=function(e){var t=[],r;for(r in e){if(Object.prototype.hasOwnProperty.call(e,r)){t.push(r)}}return t}}if(!String.prototype.endsWith){Object.defineProperty(String.prototype,"endsWith",{value:function(e,t){var r=this.toString();if(t===undefined||t>r.length){t=r.length}t-=e.length;var i=r.indexOf(e,t);return i!==-1&&i===t},writable:true,enumerable:true,configurable:true})}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(e,t){var r;if(this==null){throw new TypeError('"this" is null or not defined')}var i=Object(this);var n=i.length>>>0;if(n===0){return-1}var o=+t||0;if(Math.abs(o)===Infinity){o=0}if(o>=n){return-1}r=Math.max(o>=0?o:n-Math.abs(o),0);while(r<n){if(r in i&&i[r]===e){return r}r++}return-1}}if(!Array.prototype.forEach){Array.prototype.forEach=function(e,t){var r,i;if(this==null){throw new TypeError(" this is null or not defined")}var n=Object(this);var o=n.length>>>0;if(typeof e!=="function"){throw new TypeError(e+" is not a function")}if(arguments.length>1){r=t}i=0;while(i<o){var a;if(i in n){a=n[i];e.call(r,a,i,n)}i++}}}console=console||{};console.log=console.log||function(){};if(typeof Shopify==="undefined"){Shopify={}}if(typeof Shopify.onError!=="function"){Shopify.onError=function(){}}if(typeof SECOMAPP==="undefined"){SECOMAPP={}}SECOMAPP.removeGiftsVariant=function(e){setTimeout(function(){try{e("select option").not(".sca-fg-cart-item select option").filter(function(){var t=e(this).val();var r=e(this).text();if(r.indexOf(" - ")!==-1){r=r.slice(0,r.indexOf(" - "))}var i=[];if(r.indexOf(" / ")!==-1){i=r.split(" / ");r=i[i.length-1]}if(typeof SECOMAPP.gifts_list_avai!=="undefined"&&typeof SECOMAPP.gifts_list_avai[t]!=="undefined"||r.endsWith("% off)")){e(this).parent("select").find("option").not(".sca-fg-cart-item select option").filter(function(){var i=e(this).val();var n=e(this).text();return n.endsWith(r)||i==t}).remove();e(".dropdown *,ul li,label,div").filter(function(){var i=e(this).html(),n=e(this).data("value");return i&&i.endsWith(r)||n==t}).remove();return true}return false})}catch(e){console.log(e)}},500)};SECOMAPP.formatMoney=function(e,t){if(typeof e=="string"){e=e.replace(".","")}var r="";var i=typeof Shopify!=="undefined"&&typeof Shopify.money_format!=="undefined"?Shopify.money_format:"{{amount}}";var n=/\{\{\s*(\w+)\s*\}\}/;var o=t||(typeof this.fgsettings.sca_currency_format==="string"&&this.fgsettings.sca_currency_format.indexOf("amount")>-1?this.fgsettings.sca_currency_format:null)||i;if(o.indexOf("amount_no_decimals_no_comma_separator")<0&&o.indexOf("amount_no_comma_separator_up_cents")<0&&o.indexOf("amount_up_cents")<0&&typeof Shopify.formatMoney==="function"){return Shopify.formatMoney(e,o)}function a(e,t){return typeof e=="undefined"?t:e}function f(e,t,r,i,n,o){t=a(t,2);r=a(r,",");i=a(i,".");if(isNaN(e)||e==null){return 0}e=(e/100).toFixed(t);var f=e.split("."),c=f[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+r),s=f[1]?!n||!o?i+f[1]:n+f[1]+o:"";return c+s}switch(o.match(n)[1]){case"amount":r=f(e,2);break;case"amount_no_decimals":r=f(e,0);break;case"amount_with_comma_separator":r=f(e,2,",",".");break;case"amount_no_decimals_with_comma_separator":r=f(e,0,",",".");break;case"amount_no_decimals_no_comma_separator":r=f(e,0,"","");break;case"amount_up_cents":r=f(e,2,",","","<sup>","</sup>");break;case"amount_no_comma_separator_up_cents":r=f(e,2,"","","<sup>","</sup>");break}return o.replace(n,r)};SECOMAPP.setCookie=function(e,t,r,i,n){var o=new Date;o.setTime(o.getTime()+r*24*60*60*1e3+i*60*1e3);var a="expires="+o.toUTCString();document.cookie=e+"="+t+";"+a+(n?";path="+n:";path=/")};SECOMAPP.deleteCookie=function(e,t){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; "+(t?";path="+t:";path=/")};SECOMAPP.getCookie=function(e){var t=e+"=";var r=document.cookie.split(";");for(var i=0;i<r.length;i++){var n=r[i];while(n.charAt(0)==" ")n=n.substring(1);if(n.indexOf(t)==0)return n.substring(t.length,n.length)}return""};SECOMAPP.getQueryString=function(){var e={};var t=window.location.search.substring(1);var r=t.split("&");for(var i=0;i<r.length;i++){var n=r[i].split("=");if(typeof e[n[0]]==="undefined"){e[n[0]]=decodeURIComponent(n[1])}else if(typeof e[n[0]]==="string"){var o=[e[n[0]],decodeURIComponent(n[1])];e[n[0]]=o}else{e[n[0]].push(decodeURIComponent(n[1]))}}return e};SECOMAPP.freegifts_product_json=function(e){if(e){for(var t=0;t<e.options.length;t++)if(typeof e.options[t]!=="undefined"&&typeof e.options[t].values!=="undefined"){var r=e.options[t];for(var i=0;i<r.values.length;i++)(r.values[i].endsWith("(Freegifts)")||r.values[i].endsWith("% off)"))&&(r.values.splice(i,1),i--)}for(var n=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},o=e.price,a=e.price_max,f=e.price_min,c=e.compare_at_price,s=e.compare_at_price_max,p=e.compare_at_price_min,t=0;t<e.variants.length;t++){var i=e.variants[t],u=i.option3?i.option3:i.option2?i.option2:i.option1;"undefined"!=typeof SECOMAPP&&"undefined"!=typeof SECOMAPP.gifts_list_avai&&!n(SECOMAPP.gifts_list_avai)&&"undefined"!=typeof SECOMAPP.gifts_list_avai[i.id]||u.endsWith("(Freegifts)")||u.endsWith("% off)")?(e.variants.splice(t,1),t-=1):(a>=i.price&&(a=i.price,o=i.price),f<=i.price&&(f=i.price),i.compare_at_price&&(s>=i.compare_at_price&&(s=i.compare_at_price,c=i.compare_at_price),p<=i.compare_at_price&&(p=i.compare_at_price)),1==i.available&&(e.available=!0))}e.price=o,e.price_max=f,e.price_min=a,e.compare_at_price=c,e.compare_at_price_max=p,e.compare_at_price_min=s,e.price_varies=f>a?!0:!1,e.compare_at_price_varies=p>s?!0:!1}return e};SECOMAPP.fg_codes=[];if(SECOMAPP.getCookie("sca_fg_codes")!==""){SECOMAPP.fg_codes=JSON.parse(SECOMAPP.getCookie("sca_fg_codes"))}var e=SECOMAPP.getQueryString();if(e["freegifts_code"]&&SECOMAPP.fg_codes.indexOf(e["freegifts_code"])===-1){if(typeof SECOMAPP.activateOnlyOnePromoCode!=="undefined"&&SECOMAPP.activateOnlyOnePromoCode===true){SECOMAPP.fg_codes=[]}SECOMAPP.fg_codes.push(e["freegifts_code"]);SECOMAPP.setCookie("sca_fg_codes",JSON.stringify(SECOMAPP.fg_codes))}})();
  {%endraw%}
  ;SECOMAPP.customer={};SECOMAPP.customer.orders=[];SECOMAPP.customer.freegifts=[];{% for order in customer.orders %}SECOMAPP.customer.orders.push({"financial_status": {{order.financial_status|json}},"total_price": {{order.total_price|json}},"created_at": "{{order.created_at | date:'%s'}}" });{% for line_item in order.line_items %}{%if line_item.variant.metafields.secomapp.freegifts or line_item.variant.title contains '(Freegifts)' or line_item.vendor == 'freegifts'%}SECOMAPP.customer.freegifts.push({{line_item.variant.id}});{%endif%}{%if line_item.discount_allocations[0].discount_application.title == 'FreeGift'%}SECOMAPP.customer.freegifts.push('{{line_item.variant.id}}_{{line_item.discount_allocations[0].amount}}');{%endif%}{% endfor %}{% endfor %};SECOMAPP.customer.email={{customer.email | json}};SECOMAPP.customer.first_name={{customer.first_name | json}};SECOMAPP.customer.last_name={{customer.last_name | json}};SECOMAPP.customer.tags={{customer.tags | json}};SECOMAPP.customer.orders_count={{customer.orders_count | json}};SECOMAPP.customer.total_spent={{customer.total_spent | json}};{%if customer.last_order.financial_status =='paid' %}SECOMAPP.customer.last_order='{{customer.last_order.created_at}}';SECOMAPP.customer.last_total={{customer.last_order.total_price | json}};{% endif %}{% assign foundFreeGift=false %}{% if template contains 'cart' %}SECOMAPP.shopcart={{ cart | json }};var cic=[];{% for item in cart.items %}{%if item.product.collections%}{% capture results %}[{% for collection in item.product.collections %}{{ collection.id | json }}{% unless forloop.last %},{% endunless %}{% endfor %}]{% endcapture %}cic[{{item.id}}]={{results}};{%endif%}{% endfor %}SECOMAPP.cart_item_collection = cic;{% endif %}
</script>